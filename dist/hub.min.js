/**
 * cross-storage - Cross domain local storage
 *
 * @version   0.8.2
 * @link      https://github.com/zendesk/cross-storage
 * @author    Daniel St. Jules <danielst.jules@gmail.com>
 * @copyright Zendesk
 * @license   Apache-2.0
 */

!function e(n,t,r){function i(s,a){if(!t[s]){if(!n[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=t[s]={exports:{}};n[s][0].call(l.exports,function(e){var t=n[s][1][e];return i(t?t:e)},l,l.exports,e,n,t,r)}return t[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,n,t){!function(r){var i=e("basil.js"),o=window.CrossStorageHub={};o.init=function(e,n){o._permissions=e||[],o._storage=i[n||"localStorage"],o._installListener(),window.parent.postMessage("cross-storage:ready","*")},o._installListener=function(){var e=o._listener;window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent("onmessage",e)},o._listener=function(e){var n,t,r,i,s,a,u;if(n="null"===e.origin?"file://":e.origin,"cross-storage:poll"===e.data)return window.parent.postMessage("cross-storage:ready",e.origin);if("cross-storage:ready"!==e.data){try{r=JSON.parse(e.data)}catch(c){return}if(r&&"string"==typeof r.method&&(i=r.method.split("cross-storage:")[1])){if(o._permitted(n,i))try{a=o["_"+i](r.params)}catch(c){s=c.message}else s="Invalid permissions for "+i;u=JSON.stringify({id:r.id,error:s,result:a}),t="file://"===n?"*":n,window.parent.postMessage(u,t)}}},o._permitted=function(e,n){var t,r,i,s;if(t=["get","set","del","clear","getKeys"],!o._inArray(n,t))return!1;for(r=0;r<o._permissions.length;r++)if(i=o._permissions[r],i.origin instanceof RegExp&&i.allow instanceof Array&&(s=i.origin.test(e),s&&o._inArray(n,i.allow)))return!0;return!1},o._set=function(e){var n,t;if(n=e.ttl,n&&parseInt(n,10)!==n)throw new Error("ttl must be a number");t={value:e.value},n&&(t.expire=o._now()+n),o._storage.set(e.key,JSON.stringify(t))},o._get=function(e){var n,t,r,i;for(n=[],t=0;t<e.keys.length;t++){i=e.keys[t];try{r=JSON.parse(o._storage.get(i))}catch(s){r=null}null===r?n.push(null):r.expire&&r.expire<o._now()?(o._storage.remove(i),n.push(null)):n.push(r.value)}return n.length>1?n:n[0]},o._del=function(e){for(var n=0;n<e.keys.length;n++)o._storage.remove(e.keys[n])},o._clear=function(){o._storage.reset()},o._getKeys=function(){return o._storage.keys()},o._inArray=function(e,n){for(var t=0;t<n.length;t++)if(e===n[t])return!0;return!1},o._now=function(){return"function"==typeof Date.now?Date.now():(new Date).getTime()},"undefined"!=typeof n&&n.exports?n.exports=o:"undefined"!=typeof t?t.CrossStorageHub=o:"function"==typeof define&&define.amd?define([],function(){return o}):r.CrossStorageHub=o}(this)},{"basil.js":2}],2:[function(e,n){!function(){var e=function(n){return e.utils.extend({},e.plugins,(new e.Storage).init(n))};e.version="0.4.4",e.utils={extend:function(){for(var e="object"==typeof arguments[0]?arguments[0]:{},n=1;n<arguments.length;n++)if(arguments[n]&&"object"==typeof arguments[n])for(var t in arguments[n])e[t]=arguments[n][t];return e},each:function(e,n,t){if(this.isArray(e)){for(var r=0;r<e.length;r++)if(n.call(t,e[r],r)===!1)return}else if(e)for(var i in e)if(n.call(t,e[i],i)===!1)return},tryEach:function(e,n,t,r){this.each(e,function(e,i){try{return n.call(r,e,i)}catch(o){if(this.isFunction(t))try{t.call(r,e,i,o)}catch(o){}}},this)},registerPlugin:function(n){e.plugins=this.extend(n,e.plugins)},getTypeOf:function(e){return"undefined"==typeof e||null===e?""+e:Object.prototype.toString.call(e).replace(/^\[object\s(.*)\]$/,function(e,n){return n.toLowerCase()})}};for(var t=["Arguments","Boolean","Function","String","Array","Number","Date","RegExp","Undefined","Null"],r=0;r<t.length;r++)e.utils["is"+t[r]]=function(n){return function(t){return e.utils.getTypeOf(t)===n.toLowerCase()}}(t[r]);e.plugins={},e.options=e.utils.extend({namespace:"b45i1",storages:["local","cookie","session","memory"],expireDays:365},window.Basil?window.Basil.options:{}),e.Storage=function(){var n="b45i1"+(Math.random()+1).toString(36).substring(7),t={},r=function(n){var t=e.utils.getTypeOf(n);return"string"===t&&n||"number"===t||"boolean"===t},i=function(n){return e.utils.isArray(n)?n:e.utils.isString(n)?[n]:[]},o=function(n,t){var i="";return r(t)?i+=t:e.utils.isArray(t)&&(t=e.utils.isFunction(t.filter)?t.filter(r):t,i=t.join(".")),i&&r(n)?n+"."+i:i},s=function(e,n){return r(e)?n.replace(new RegExp("^"+e+"."),""):n},a=function(e){return JSON.stringify(e)},u=function(e){return e?JSON.parse(e):null},c={engine:null,check:function(){try{window[this.engine].setItem(n,!0),window[this.engine].removeItem(n)}catch(e){return!1}return!0},set:function(e,n){if(!e)throw Error("invalid key");window[this.engine].setItem(e,n)},get:function(e){return window[this.engine].getItem(e)},remove:function(e){window[this.engine].removeItem(e)},reset:function(e){for(var n,t=0;t<window[this.engine].length;t++)n=window[this.engine].key(t),e&&0!==n.indexOf(e)||(this.remove(n),t--)},keys:function(e){for(var n,t=[],r=0;r<window[this.engine].length;r++)n=window[this.engine].key(r),e&&0!==n.indexOf(e)||t.push(s(e,n));return t}};return t.local=e.utils.extend({},c,{engine:"localStorage"}),t.session=e.utils.extend({},c,{engine:"sessionStorage"}),t.memory={_hash:{},check:function(){return!0},set:function(e,n){if(!e)throw Error("invalid key");this._hash[e]=n},get:function(e){return this._hash[e]||null},remove:function(e){delete this._hash[e]},reset:function(e){for(var n in this._hash)e&&0!==n.indexOf(e)||this.remove(n)},keys:function(e){var n=[];for(var t in this._hash)e&&0!==t.indexOf(e)||n.push(s(e,t));return n}},t.cookie={check:function(){if(!navigator.cookieEnabled)return!1;if(window.self!==window.top){var e="thirdparty.check="+Math.round(1e3*Math.random());return document.cookie=e+"; path=/",-1!==document.cookie.indexOf(e)}return!0},set:function(e,n,t){if(!this.check())throw Error("cookies are disabled");if(t=t||{},!e)throw Error("invalid key");var r=encodeURIComponent(e)+"="+encodeURIComponent(n);if(t.expireDays){var i=new Date;i.setTime(i.getTime()+24*t.expireDays*60*60*1e3),r+="; expires="+i.toGMTString()}if(t.domain&&t.domain!==document.domain){var o=t.domain.replace(/^\./,"");if(-1===document.domain.indexOf(o)||o.split(".").length<=1)throw Error("invalid domain");r+="; domain="+t.domain}t.secure===!0&&(r+="; secure"),document.cookie=r+"; path=/"},get:function(e){if(!this.check())throw Error("cookies are disabled");for(var n,t=encodeURIComponent(e),r=document.cookie?document.cookie.split(";"):[],i=r.length-1;i>=0;i--)if(n=r[i].replace(/^\s*/,""),0===n.indexOf(t+"="))return decodeURIComponent(n.substring(t.length+1,n.length));return null},remove:function(e){this.set(e,"",{expireDays:-1});for(var n=document.domain.split("."),t=n.length;t>=0;t--)this.set(e,"",{expireDays:-1,domain:"."+n.slice(-t).join(".")})},reset:function(e){for(var n,t,r=document.cookie?document.cookie.split(";"):[],i=0;i<r.length;i++)n=r[i].replace(/^\s*/,""),t=n.substr(0,n.indexOf("=")),e&&0!==t.indexOf(e)||this.remove(t)},keys:function(e){if(!this.check())throw Error("cookies are disabled");for(var n,t,r=[],i=document.cookie?document.cookie.split(";"):[],o=0;o<i.length;o++)n=i[o].replace(/^\s*/,""),t=decodeURIComponent(n.substr(0,n.indexOf("="))),e&&0!==t.indexOf(e)||r.push(s(e,t));return r}},{init:function(e){return this.setOptions(e),this},setOptions:function(n){this.options=e.utils.extend({},this.options||e.options,n)},support:function(e){return t.hasOwnProperty(e)},check:function(e){return this.support(e)?t[e].check():!1},set:function(n,r,s){if(s=e.utils.extend({},this.options,s),!(n=o(s.namespace,n)))return!1;r=s.raw===!0?r:a(r);var u=null;return e.utils.tryEach(i(s.storages),function(e){return t[e].set(n,r,s),u=e,!1},null,this),u?(e.utils.tryEach(i(s.storages),function(e){e!==u&&t[e].remove(n)},null,this),!0):!1},get:function(n,r){if(r=e.utils.extend({},this.options,r),!(n=o(r.namespace,n)))return null;var s=null;return e.utils.tryEach(i(r.storages),function(e){return null!==s?!1:(s=t[e].get(n,r)||null,s=r.raw===!0?s:u(s),void 0)},function(){s=null},this),s},remove:function(n,r){r=e.utils.extend({},this.options,r),(n=o(r.namespace,n))&&e.utils.tryEach(i(r.storages),function(e){t[e].remove(n)},null,this)},reset:function(n){n=e.utils.extend({},this.options,n),e.utils.tryEach(i(n.storages),function(e){t[e].reset(n.namespace)},null,this)},keys:function(e){e=e||{};var n=[];for(var t in this.keysMap(e))n.push(t);return n},keysMap:function(n){n=e.utils.extend({},this.options,n);var r={};return e.utils.tryEach(i(n.storages),function(i){e.utils.each(t[i].keys(n.namespace),function(n){r[n]=e.utils.isArray(r[n])?r[n]:[],r[n].push(i)},this)},null,this),r}}},e.memory=(new e.Storage).init({storages:"memory",namespace:null,raw:!0}),e.cookie=(new e.Storage).init({storages:"cookie",namespace:null,raw:!0}),e.localStorage=(new e.Storage).init({storages:"local",namespace:null,raw:!0}),e.sessionStorage=(new e.Storage).init({storages:"session",namespace:null,raw:!0}),window.Basil=e,"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof n&&n.exports&&(n.exports=e)}()},{}]},{},[1]);